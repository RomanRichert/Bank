\hypertarget{_transaction_service_8java_source}{}\doxysection{Transaction\+Service.\+java}
\label{_transaction_service_8java_source}\index{src/main/java/com/telran/bank/service/TransactionService.java@{src/main/java/com/telran/bank/service/TransactionService.java}}
\mbox{\hyperlink{_transaction_service_8java}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00001}00001\ \textcolor{keyword}{package\ }com.telran.bank.service;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00003}00003\ \textcolor{keyword}{import}\ com.telran.bank.Entity.Transaction;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00004}00004\ \textcolor{keyword}{import}\ com.telran.bank.Enum.TransactionType;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00005}00005\ \textcolor{keyword}{import}\ com.telran.bank.Exception.TransactionNotFoundException;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00006}00006\ \textcolor{keyword}{import}\ com.telran.bank.repository.TransactionRepository;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00007}00007\ \textcolor{keyword}{import}\ org.springframework.beans.factory.annotation.Autowired;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00008}00008\ \textcolor{keyword}{import}\ org.springframework.stereotype.Service;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00009}00009\ \textcolor{keyword}{import}\ org.springframework.web.bind.annotation.RequestParam;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00011}00011\ \textcolor{keyword}{import}\ java.text.ParseException;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00012}00012\ \textcolor{keyword}{import}\ java.text.SimpleDateFormat;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00013}00013\ \textcolor{keyword}{import}\ java.util.List;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00015}00015\ @Service}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00016}\mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1service_1_1_transaction_service}{00016}}\ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1service_1_1_transaction_service}{TransactionService}}\ \{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00017}00017\ \ \ \ \ @Autowired}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00018}00018\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{interfacecom_1_1telran_1_1bank_1_1repository_1_1_transaction_repository}{TransactionRepository}}\ transactionRepository;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00019}00019\ }
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00020}\mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1service_1_1_transaction_service_a8a31ae8ab8136716773845efa7e79bf6}{00020}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1_entity_1_1_transaction}{Transaction}}\ \mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1service_1_1_transaction_service_a8a31ae8ab8136716773845efa7e79bf6}{saveTransaction}}(\mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1_entity_1_1_transaction}{Transaction}}\ transaction)\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00021}00021\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.save(transaction);}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00022}00022\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00024}\mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1service_1_1_transaction_service_a612dedf2da9e09553e2c9ee2f56f53c3}{00024}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1_entity_1_1_transaction}{Transaction}}\ \mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1service_1_1_transaction_service_a612dedf2da9e09553e2c9ee2f56f53c3}{getTransaction}}(Long\ \textcolor{keywordtype}{id})\ \textcolor{keywordflow}{throws}\ \mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1_exception_1_1_transaction_not_found_exception}{TransactionNotFoundException}}\ \{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00025}00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findById(\textcolor{keywordtype}{id})}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00026}00026\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .orElseThrow(()\ -\/>\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1_exception_1_1_transaction_not_found_exception}{TransactionNotFoundException}}(\textcolor{stringliteral}{"{}id\ =\ "{}}\ +\ \textcolor{keywordtype}{id}));}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00027}00027\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00028}\mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1service_1_1_transaction_service_a57d3b45c79f7cc647389c1ec4620a97b}{00028}}\ \ \ \ \ \textcolor{keyword}{public}\ List<Transaction>\ \mbox{\hyperlink{classcom_1_1telran_1_1bank_1_1service_1_1_transaction_service_a57d3b45c79f7cc647389c1ec4620a97b}{getAllTransactions}}(@RequestParam(required\ =\ \textcolor{keyword}{false})\ String\ date,}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00029}00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ @RequestParam(required\ =\ \textcolor{keyword}{false})\ String\ type,}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00030}00030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ @RequestParam(required\ =\ \textcolor{keyword}{false})\ String\ sort)\ \textcolor{keywordflow}{throws}\ ParseException\ \{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00031}00031\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{boolean}\ dateIsNotNullOrEmpty\ =\ date\ !=\ \textcolor{keyword}{null}\ \&\&\ !date.isEmpty();}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00032}00032\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{boolean}\ typeIsNotNullOrEmpty\ =\ type\ !=\ \textcolor{keyword}{null}\ \&\&\ !type.isEmpty();}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00033}00033\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{boolean}\ dateAndTypeAreNotNullOrEmpty\ =\ typeIsNotNullOrEmpty\ \&\&\ dateIsNotNullOrEmpty;}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00034}00034\ \ \ \ \ \ \ \ \ SimpleDateFormat\ format\ =\ \textcolor{keyword}{new}\ SimpleDateFormat(\textcolor{stringliteral}{"{}yyyy-\/MM-\/dd"{}});}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00036}00036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(sort\ !=\ \textcolor{keyword}{null}\ \&\&\ !sort.isEmpty())\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00037}00037\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(sort.equalsIgnoreCase(\textcolor{stringliteral}{"{}dateTime"{}}))\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(dateAndTypeAreNotNullOrEmpty)\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ with\ given\ TYPE\ and\ DATE\ ordered\ ASCENDING\ by\ DATE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findByTypeAndDateTimeOrderByDateTimeAsc(\mbox{\hyperlink{enumcom_1_1telran_1_1bank_1_1_enum_1_1_transaction_type}{TransactionType}}.valueOf(type),\ format.parse(date));}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(typeIsNotNullOrEmpty)\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ with\ given\ TYPE\ ordered\ ASCENDING\ by\ DATE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findByTypeOrderByDateTimeAsc(\mbox{\hyperlink{enumcom_1_1telran_1_1bank_1_1_enum_1_1_transaction_type}{TransactionType}}.valueOf(type));}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(dateIsNotNullOrEmpty)\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ with\ given\ DATE\ ordered\ ASCENDING\ by\ DATE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00046}00046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findByDateTimeOrderByDateTimeAsc(format.parse(date));}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00047}00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ ordered\ ASCENDING\ by\ DATE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ transactionRepository.findAllOrderByDateTimeAsc();}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(sort.equalsIgnoreCase(\textcolor{stringliteral}{"{}-\/dateTime"{}}))\ \{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(dateAndTypeAreNotNullOrEmpty)\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ with\ given\ TYPE\ and\ DATE\ ordered\ DESCENDING\ by\ DATE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findByTypeAndDateTimeOrderByDateTimeDesc(\mbox{\hyperlink{enumcom_1_1telran_1_1bank_1_1_enum_1_1_transaction_type}{TransactionType}}.valueOf(type),\ format.parse(date));}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(typeIsNotNullOrEmpty)\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ with\ given\ TYPE\ ordered\ DESCENDING\ by\ DATE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findByTypeOrderByDateTimeDesc(\mbox{\hyperlink{enumcom_1_1telran_1_1bank_1_1_enum_1_1_transaction_type}{TransactionType}}.valueOf(type));}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(dateIsNotNullOrEmpty)\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ with\ given\ DATE\ ordered\ DESCENDING\ by\ DATE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00058}00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findByDateTimeOrderByDateTimeDesc(format.parse(date));}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ ordered\ DESCENDING\ by\ DATE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{return}\ transactionRepository.findAllOrderByDateTimeDesc();}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00062}00062\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(dateAndTypeAreNotNullOrEmpty)\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ with\ given\ TYPE\ and\ DATE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findByTypeAndDateTime(\mbox{\hyperlink{enumcom_1_1telran_1_1bank_1_1_enum_1_1_transaction_type}{TransactionType}}.valueOf(type),\ format.parse(date));}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00065}00065\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(typeIsNotNullOrEmpty)\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ with\ given\ TYPE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findByType(\mbox{\hyperlink{enumcom_1_1telran_1_1bank_1_1_enum_1_1_transaction_type}{TransactionType}}.valueOf(type));}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00068}00068\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(dateIsNotNullOrEmpty)\{}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//return\ all\ accounts\ with\ given\ DATE}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findByDateTime(format.parse(date));}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00071}00071\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transactionRepository.findAll();}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00075}00075\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{_transaction_service_8java_source_l00077}00077\ \}}

\end{DoxyCode}
